architecture:
  version: 0.4
  nodes:
  # ============================================================
  # 1. System
  # ============================================================
  - !Container
    name: system
    attributes:
      technology: "28nm"
      global_cycle_seconds: 1e-09
  
  # ============================================================
  # 2. DRAM
  # ============================================================
  - !Component
    name: SEDRAM
    class: DRAM
    attributes:
      type: "LPDDR4"
      width: 64
      datawidth: 64

  # ============================================================
  # 3. PIM Level (2D Mesh Hierarchy)
  # ============================================================
  - !Container
    name: Chip
    attributes: {latency: 0}

  - !Container
    name: PIM_Node_Column
    spatial: {meshX: 2} 
    
  - !Container
    name: PIM_Node_Row
    spatial: {meshY: 2}

  - !Component
    name: Node_SRAM
    class: smartbuffer_SRAM 
    attributes:
      depth: 32768
      width: 64
      datawidth: 16
      read_bandwidth: 16
      write_bandwidth: 16

  # ============================================================
  # 4. PE Level
  # ============================================================
  - !Container
    name: PE_column
    spatial: {meshX: 16}

  - !Container
    name: PE_row
    spatial: {meshY: 16}

  # ============================================================
  # 5. Register File
  # ============================================================
  - !Component
    name: shared_rf
    class: smartbuffer_RF
    attributes:
      depth: 512   
      width: 16
      datawidth: 16

  # ============================================================
  # 6. MAC Unit
  # ============================================================
  - !Component 
    name: MAC
    class: intmac
    attributes:
      multiplier_width: 16
      adder_width: 32
      datawidth: 16